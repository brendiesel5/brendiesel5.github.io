(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{380:function(e,t,n){"use strict";String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t});var i=40,a=38,r=13,s=$("#search-keywords"),c=$("#top-search-form"),o=$("#search_results_for_query"),l=$("#filtered-search-history"),u=$(".search-query"),d=$(".search-context");d.hide();var h=!1;window.addEventListener("orientationchange",(function(){v.close()}));var f=function(){var e=store.get("searchList");return e||(e=[]),e};0!==o.length&&s.val(o.data("query")),c.submit((function(){h=!0;var e=String(s.val());if(""!==e){var t=f(),n=t.indexOf(e);n>-1&&t.splice(n,1),t.unshift(e),t.length>10&&(t=t.slice(0,10)),store.set("searchList",t)}}));var v=new XF.MenuClick(s,{}),p=function(e,t){l.html(""),""===t?d.hide():d.show(),e.forEach((function(e){var n,i;n=e,(i=document.createElement("div")).textContent=n;var a=(e=i.innerHTML).indexOf(t),r="<strong>"+t+"</strong>"+e.substring(a+t.length);l.append('<div style="position: relative;" class="menu-linkRow-block" data-value="'+e+'" qid="recent-search-menu-item"><a href="javascript:void(0)" class=" menu-linkRow search-menu-item-click" data-value="'+e+'" style="display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+r+'</a><i data-value="'+e+'" style="position: absolute; top: 0px; right: 0px; cursor: pointer; padding: 10px;" class="fa fa-times search-menu-item-delete" qid="recent-search-menu-item-delete"></i></div>')})),u.each((function(e,n){return $(n).html(t)}))},m=-1,g=function(e){var t=l.find(".menu-linkRow");l.find(".menu-linkRow").removeClass("is-selected"),0!==t.length&&(e<0&&(e=m=t.length-1),t.length>e?$(t[e]).addClass("is-selected"):(m=0,$(t[m]).addClass("is-selected")))};s.on("keydown",(function(e){if(!h)if(e.keyCode===i)m++,g(m);else if(e.keyCode===a)m--,g(m);else if(e.keyCode===r){var t=f();if(m>-1&&m<t.length){var n=t[m];s.val(n)}c.submit()}else m=-1})),s.on("input click",(function(){var e=function(e){var t=e;return t=(t=t.replace(/[<]+/g,"&lt;")).replace(/[>]+/g,"&gt;")}($(this).val()),t=String(e),n=f().filter((function(e){return e.startsWith(t)}));p(n,t),v.isOpen()||v.open(),s.focus(),m=-1})),$(document).on("click",".search-menu-item-click",(function(){s.val($(this).text()),v.close(),c.submit()})),$(document).on("click",".search-menu-item-delete",(function(e){e.preventDefault();var t=f(),n=String($(this).data("value")),i=t.indexOf(n),a=String(s.val()),r=t.filter((function(e){return e.startsWith(a)&&e!==n}));i>-1&&(t.splice(i,1),0===r.length&&v.close(),l.find('.menu-linkRow-block[data-value="'+n+'"]').hide()),store.set("searchList",t)})),$(document).on("click",".search-context",(function(e){e.preventDefault();var t=$(e.currentTarget).find(".search-query").data("constraint");$("#search-constraint").val(JSON.stringify(t)),c.submit()})),$(document).on("click",".input-search .fa-search",(function(e){e.preventDefault(),c.submit()})),$(document).on("click",".input-search .fa-times",(function(e){e.preventDefault(),$(".input-search input").val("")})),$(document).on("click",".advanced",(function(e){var t=$(".input-search input").val(),n=$(".advanced")[0].href;""!==t&&($(".advanced")[0].href=n+"?q="+t)}))}},[[380,0]]]);